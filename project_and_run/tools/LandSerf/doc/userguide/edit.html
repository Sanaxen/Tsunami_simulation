<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
 <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
 <link rel="Stylesheet" rev="Stylesheet" href="../css/landserf.css" media="All" />

<!-- LandSerf Header -->

 <title>LandSerf User's Guide - 3. Creating, Editing and Transforming Data</title>
 <meta name="description" content="LandSerf User's Guide" />
 <meta name="keywords" content="LandSerf GIS DEM Terrain modelling" />
</head>

<body>
<div id="header">
 <a href="../index.html">
  <img src="../images/landserfText.gif" width="304" height="57" alt="Go to LandSerf documentation" />
  <span id="lsicon">
   <img src="../images/iconTitle.gif" width="57" height="57" alt="Go to Landserf documentation" />
  </span>
 </a>
 <br />

 <div id="breadcrumbs">
  <span id="currentLocation">Chapter 3</span>          |
  <a href="./index.html">User's Guide</a>              |
  <a href="../../index.html">LandSerf 2.3 Documentation</a>  |
  <a href="http://www.landserf.org">landserf.org</a>
 </div>
</div>

<div id="container">

 <!-- End of header -->

<h1>Chapter 3. Creating, Editing and Transforming Data</h1>

<h2>3.1 Creating New Raster Data</h2>

<p>
 It is possible to create new raster surfaces by selecting <code>New Raster...</code>
 from the <code>File</code> menu, by pressing the <img src="../images/raster16.gif" width="16" height="16" alt="button" />
 button, or by using the shortcut key <code>Ctrl-N</code>. You will be presented with a dialogue window
 allowing the bounds, resolution and map projection of the new raster to be changed. The default settings create
 a raster with 100 rows and 100 columns. The new raster can be either a polynomial expression or a 
 fractal surface with a user-defined fractal dimension.
 <br /><br />
 <img src="images/figure3.1.gif" width="362" height="573" align="bottom" alt="New raster window" />
 <span class="caption">New raster window using polynomial expression and metadata.</span>
</p>

<p>
 For modelling and simulation purposes it is sometimes useful to create artificial surfaces with known 
 characteristics. By selecting <code>Polynomial</code> from the <code>Create New Raster</code> window,
 you can define surfaces using variables and functions. Some of the more common are identified below.
 For a full list see the <a href="../landscript/functions.html">LandScript function reference</a>.
</p>

 <table border="0" cellspacing="0" cellpadding="4">
 <tr><td><b>Expression</b></td><td><b>Explanation</b></td></tr>
 <tr><td valign="top" nowrap="nowrap"><code>x</code></td><td>the x position of each raster cell. x is scaled to be +- nCols/2, where nCols is the number of
                   columns in the raster</td></tr>
 <tr><td valign="top" nowrap="nowrap"><code>y</code></td><td>the y position of each raster cell. y is scaled to be +- nRows/2, where nRows is the number of
                   rows in the raster</td></tr>
 <tr><td valign="top" nowrap="nowrap"><code>z1</code></td><td>the value of any given cell in the primary raster.</td></tr>
 <tr><td valign="top" nowrap="nowrap"><code>z2</code></td><td>the value of any given cell in the secondary raster. This will only be
                    meaningful if a secondary raster has been selected; if it does not, z2 will always return 0.</td></tr>
 <tr><td valign="top" nowrap="nowrap"><code>pi()</code>, <code>e()</code></td><td>The constants PI (3.1459) and <i>e</i> (2.7183)</td></tr>
 <tr><td valign="top" nowrap="nowrap"><code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>^</code></td><td>Addition, subtraction, multiplication, division and power operators.</td></tr>
 <tr><td valign="top" nowrap="nowrap"><code>cos()</code>, <code>sin()</code>, <code>tan()</code></td><td>trigonometrical functions. Expects angles to be given in radians (to convert from
                    degrees into radians multiply by pi()/180 or 0.01745329). Values of infinity (e.g. 
					<code>tan(pi/2)</code>) are returned as 0.</td></tr>
 <tr><td valign="top" nowrap="nowrap"><code>acos()</code>, <code>asin()</code>, <code>atan()</code>, <code>atan2()</code></td><td>inverse trigonometrical functions. Returns values in radians (to convert from
                    radians into degrees multiply by 180/pi() or 57.2957795). Values outside of the range
					of +-1 supplied to these functions will return a value of 0.</td></tr>
 <tr><td valign="top" nowrap="nowrap"><code>sqrt()</code></td><td>Square root. If the value given to the function is negative, the function will return a 0.</td></tr>
 <tr><td valign="top" nowrap="nowrap"><code>ln()</code></td><td>Natural logarithm (to base <i>e</i>). If the value given to the function is &lt;=0, the
                    function will return a zero.</td></tr>
 <tr><td valign="top" nowrap="nowrap"><code>rand()</code></td><td>Random value with 'rectangular' distribution between 0 and 1.</td></tr>
 <tr><td valign="top" nowrap="nowrap"><code>gauss()</code></td><td>Random value with Gaussian (normal) distribution with mean of 0 and standard deviation of 1.</td></tr>
 <tr><td valign="top" nowrap="nowrap"><code>ifelse(<i>condition</i>, <i>value_if true</i>, <i>value_if_false</i>)</code></td><td>Evaluates the expression condition. If the condition is true or evaluates to a non-zero value, returns <code><i>value_if_true</i></code> otherwise returns <i><code>value_if_false</code></i>.</td></tr>
 <tr><td colspan="2">&nbsp;</td></tr>
 <tr><td valign="top" nowrap="nowrap"><b>Example</b></td><td><b>Explanation</b></td></tr>
  <tr><td valign="top" nowrap="nowrap"><code>x+y</code></td> <td>Creates a plane sloping from bottom right to top left.</td></tr>
  <tr><td valign="top" nowrap="nowrap"><code>0 - (x^2 + y^2)</code></td> <td>Creates a convex-up dome.</td></tr>
  <tr><td valign="top" nowrap="nowrap"><code>z1-z2</code></td> <td>Creates a difference map of the differences between the primary and secondary rasters.</td></tr>
  <tr><td valign="top" nowrap="nowrap"><code>100 - sqrt((x*y*sin(x*y/200) * cos(y/30))+(x^2+y^2))</code></td> <td>Complex polynomial (central peak with surrounding valleys).</td></tr>
  <tr><td valign="top" nowrap="nowrap"><code>z1 + (gauss()*10)</code></td> <td>Adds a random gaussian value with mean of 0 and standard deviation of 10 to each cell in the primary raster.</td></tr>
  <tr><td valign="top" nowrap="nowrap"><code>ifelse(z1&lt;10,10,z1)</code></td> <td>Creates a 'flooded' version of the primary raster with the 'water level' set to 10 vertical units.</td></tr>
 </table>
 
 
<p>
  Expressions that are incorrectly specified (e.g. using unknown functions, or failure to close brackets) are highlighted
  in the edit window and prevent it from being closed.
  <br /><br />
 <img src="images/figure3.2.jpg" width="610" height="295" align="bottom" alt="Polynomial and combined polynomial and fractal surfaces" />
 <span class="caption">Polynomial and combined polynomial and fractal surfaces.</span>
</p>

<p>
 By selecting <code>Fractal</code> from the <code>Create New Raster</code> window, more realistic terrain surfaces may be
 created for modelling and simulation purposes. The roughness of such surfaces can be controlled by entering a fractal dimension
 between 2.0 (smooth) and 3.0 (very rough). Typical landscapes have fractal dimensions of around 2.1.
</p>
<p>
 These may also be combined with smoother polynomial surfaces, as shown in the figure above. This can be achieved by creating a
 fractal surface and a separate a polynomial surface and finally creating a new polynomial as
 <code>z1+z2</code>, thus combining the two simulated fields.
</p>

<h2>3.2 Creating New Vector Data</h2>

<p>
 New vector maps can be created either by selecting <code>New Vector...</code>
 from the <code>File</code> menu or by pressing the <img src="../images/vector16.gif" width="16" height="16" alt="button" />
 button. You will be presented with a dialogue window allowing the bounds of the new map to be changed. 
 Initially this vector map will be 'empty', but it is possible to add vector objects through on-screen
 digitizing. 
</p>

<p>
 To digitize new data, make sure a vector map is selected (either an empty vector map as described above,
 or an existing one to which manually digitized objects are to be added), then select either the 
 <code>Edit-&gt;Digitize Mode</code> menu option or the <img src="../images/digitize16.gif" width="16" height="16" alt="button" />
 button.
 <br /><br />
 <img src="images/figure3.4.jpg" width="616" height="496" align="bottom" alt="Vector digitizing" />
 <span class="caption">Digitizing new vector objects.</span>
</p>

<p>
 You will then be presented with a small window (see the figure above) that provides you with the option
 of creating vector points, lines or areas. By clicking in the main LandSerf window with the left mouse
 button, coordinates can be added to a new vector object. The numeric attribute to be associated with that
 object can also be defined at this stage. If the <code>auto-increment</code> option is selected, the numeric
 attribute associated with the object will be increased by one every time an object is digitized. This can be
 particularly useful if you wish to digitize a series of waypoints. To store the digitized points, press the 
 <code>Store object</code> button. Pressing <code>Clear object</code> will clear the points in the currently 
 digitized object (but not the vector map as a whole). Pressing <code>Cancel</code> will quit from digitize
 mode without saving any of the newly digitized objects.
</p>

<p>
 To make the process of digitizing easier and more precise, any raster data can be displayed on screen
 while digitizing, and the main display can be panned with the right mouse button (or &lt;shift&gt; left-click).
 If you wish to zoom in or out, you can use the mouse wheel or temporarily toggle between <i>digitize mode</i> and <i>zoom mode</i>
 by selecting the <img src="../images/zoom16.gif" width="16" height="16" alt="button" /> and <img src="../images/digitize16.gif" width="16" height="16" alt="button" />
 buttons or the appropriate menu options.
</p>

<p>
 Complex polygons with holes and islands can also be digitized. To do this, digitize the outer boundary first,
 making sure it is stored as an area object by pressing the <code>Store Object</code> button. To cut a hole in 
 the polygon just created, ensuring that the attribute matches that of the existing polygon, digitize the boundary
 of the hole, but with the <code>Control</code> key pressed down. Once this hole has been created, pressing the 
 <code>Store Object</code> should create the hole.
 <br /><br />
 <img src="images/figure3.4b.jpg" width="397" height="227" align="bottom" alt="Digitizing complex polygons with holes and islands" />
 <span class="caption">Digitizing complex polygons with holes and islands.</span>
</p>

<p>
It is often easier to digitize if before selecting the digitize option, you set the <code>Display-&gt;Vector appearance...</code>
to display point labels, a point size of about 3.0, and line width of about 2.0. This will make it easier to see the objects
you have already digitized along with their attribute values.



<h2>3.3 Combining Data</h2>

<h3>3.3.1 Combing Raster Data</h3>

<p>
 It is possible to combine the primary and secondary raster into a single raster layer by selecting the
 <code>Edit-&gt;Combine rasters...</code> menu option. This allows rasters that do not have the same spatial
 extent to be merged into a single object. This can be particularly useful for assembling 'tiled' datasets.
 Assuming a primary and a secondary raster have been selected in the thumbnail view, selecting the <code>Combine Rasters</code>
 option will bring up a window similar to the one shown below. If the spatial extents of both rasters overlap but are 
 not identical, you will have the option of either selecting the <i>intersection</i> of the two
 layers, or their <i>union</i>. For cell locations that are present in both rasters, you can select the
 output value for those locations to be the primary raster cell value, the secondary raster cell value,
 or the average of the two. Additionally, you can choose to override this selection for cells where the 
 chosen raster value is <i>null</i> but would be a numeric value if selected from the other raster.
<br /><br />
 <img src="images/figure3.3.gif" width="263" height="307" align="bottom" alt="Raster combination options" />
 <span class="caption">Raster combination options.</span>
</p>

<h3>3.3.2 Combing Vector Data</h3>

<p>
 Vector maps can be combined in much the same way as raster data. Select the two maps to be combined as primary
 and secondary vector maps, then choose the <code>Edit-&gt;Combine vector maps...</code> menu option. As with
 raster combination, if the two vector map areas overlap you will have the option of either selecting the 
 <i>intersection</i> of the two maps, or their <i>union</i>. You will also have the option of using the 
 intersection/union of the bounding rectangle of the entire map, or the combination of the vector objects.
 This second option is useful if you wish to select all objects that fall within a given set of polygons for example.
<br /><br />
 <img src="images/figure3.5.gif" width="234" height="253" align="bottom" alt="Vector combination options" />
 <span class="caption">Vector combination options.</span>
</p>


<h3>3.3.3 'Cookie-cutting' Rasters With Vector Maps</h3>

<p>
 The spatial extent of vector maps or the objects within them can be used to cut out selected portions of raster data.
 Parts of the the raster map that fall outside the vectors are replaced with null values and those parts within are retained.
 To do this, make sure you have a primary raster and primary vector map displayed, then select <code>Edit-&gt;Combine raster and vector map...</code>.
 By selecting <code>Intersection</code> as the type of combination and <code>Use object intersection</code> as the type, LandSerf
 will create a new raster consisting of any of the primary raster's cells that fall within any area objects in the primary
 vector. If <code>Use boundary intersection</code> is selected, the enclosing rectangle of the vector map is used as the basis
 for raster selection.
 <br /><br />
 <img src="images/figure3.5a.jpg" width="700" height="344" align="bottom" alt="Cookie cutting a raster with a vector object" />
 <span class="caption">Cookie cutting a raster with a vector object.</span>
</p>

<h3>3.3.4 Copying Selected Vector Objects</h3>

<p>
 Choosing <code>Edit-&gt;Select vector objects...</code> allows a copy of a vector map to be created containing only
 objects with the given set of attributes. In the window that appears, enter numeric attribute IDs in the <code>Attributes to select</code>
 field. These should be comma separated and can contain ranges of values separated by '<code>to</code>'. To copy null values,
 '<code>n</code>' can be entered. The following are therefore all examples of valid entries:
</p>
<p class="indent"><code>
1<br />
10,6,250<br />
1 to 99,-999<br />
0,n
</code></p>

<h3>3.3.5 Transferring Raster Values to Vector Points</h3>

<p>
 The final way in which spatial objects may be combined requires a primary vector map containing point objects and 
 a primary raster map. By selecting <code>Edit-&gt;Combine points with raster</code>, a new attribute is associated with
 each point object. That attribute is based on the raster cell value at that point. This provides a convenient way of,
 for example, using a DEM to create spot heights for selected locations.
</p>


<a name="attributes">&nbsp;</a>
<h2>3.4 Creating New Attribute Data</h2>

<p>
 Both raster and vector data are associated with numeric attribute values. However, this can be limiting
 for data that have non-numeric or multiple attributes. In order to overcome this, any raster or vector
 map in LandSerf can be linked to an <i>attribute table</i> that defines the relations between numeric
 attributes (the 'ID' or 'key') and any other numeric or textual attribute values.
</p>

<p>
 To create an attribute table, select either <code>Edit Raster</code> or <code>Edit Vector</code> as
 appropriate and then click the <code>Edit</code> button in the <code>Attributes</code> area (adjacent
 to the minimum/maximum attribute values). This should open a new attribute table editor that allows
 you to add rows and columns to the attribute table as well as load or save them from/to a file. Any
 attribute can be edited by clicking on the appropriate cell in the table. Attribute type names (column
 headings) can be changed by clicking the relevant column header.
</p>

<p>
 Attributes can be either numeric or textual. Textual attributes have the advantage of allowing
 meaningful descriptions to be attached to objects, while numeric attributes can be manipulated
 analytically, for example, by calculating their average. By default, if you add a new attribute
 to a table, it is assumed to be textual. If all rows in the table of a textual attribute happen
 to be numbers, they can be converted to numeric attributes by pressing the <code>Validate</code>
 button.
</p>

<p>
 All attribute tables have an <i>active attribute</i> associated with them. This attribute is indicated
 in bold in the editor window (see figure below for an example). The active attribute is the one that
 is displayed when querying a raster or vector. To make any attribute active, simply click one of the
 values in the relevant table column.
 <br /><br />
 <img src="images/figure3.6.gif" width="464" height="461" align="bottom" alt="Attribute table" />
 <span class="caption">Attribute table.</span>
</p>


<h2>3.5 Editing Spatial Objects</h2>

<p>
 All spatial objects (raster and vectors) can be associated with metadata describing the spatial 
 properties of the object (bounds, resolution and map projection). They can also be classified into 
 different <i>object types</i> (e.g. elevation, slope, features, fuzzy membership, image, contours, TINs etc.)
 that determine the type of operations that can be performed on them and the way in which they are displayed.
</p>

<p>
 To edit either a raster or vector object, select it then choose the <code>Edit-&gt;Edit Raster</code>
 or <code>Edit-&gt;Edit Vector</code> menu item. Bounds, resolution (raster only), map projection, type,
 colour table and supplementary notes can all be changed from this window. Bounds can be changed either by
 typing new coordinates for each of the four edges of the object, or by dragging the mouse in the main display
 window to identify a sub-area of the object. To 'cut out' a subset of an object, 
 make sure the <code>Extract subset</code> option is selected. To change the resolution of a raster
 object, ensure the <code>Interpolate to new resolution</code> option is selected and appropriate values
 are entered in the <code>N-S Res</code> and <code>E-W Res</code> fields. This technique can be used to
 remove 'steps' in a coarse DEM, or to provide an optimal sampling strategy for rasters that are too large
 for effective processing.
</p>

<p>
 If you know the map projection system used to represent a spatial object, this can be set by clicking
 the <code>Edit</code> button in the <code>Map projection</code> section of the edit window. You can choose
 between a limited set of projections and ellipsoids. Note that changing the projection information here does
 not reproject the spatial data. To transform the data from one projection system to another, select an
 appropriate option from the <code>Transform-&gt;Reproject</code> menu (see Section 3.7.1 below).
 <br /><br />
 <img src="images/figure3.7.gif" width="288" height="184" align="bottom" alt="Projection information" />
 <span class="caption">Projection information.</span>
 
</p>


<p>
 To commit changes made in the edit window, press the <code>OK</code> button. If there is an inconsistency
 between the new raster bounds and the resolution and neither the resampling or subset options are selected,
 the relevant fields will be highlighted when you attempt to exit the window.
</p> 

<h2>3.6 Removing Data</h2>

<p>
 Rasters and vectors can be removed by selecting the relevant thumbnail view and then selecting either the
 <code>File-&gt;Close raster</code> or <code>File-&gt;Close vector</code> menu option. You can also
 close all spatial objects by selecting the <code>File-&gt;Close all...</code> option.
</p>

<h3>3.6.1 Simplifying Linear Data</h3>

<p>
 Some vector objects may contain detail that is not required for analysis or display. Detailed vector boundaries
 can slow down performance and consume unnecessary resources. Selecting <code>Edit-&gt;Simplify vector map...</code>
 will allow you to produce a new version of a vector map containing fewer points. The degree of simplification is 
 controlled by specifying a <i>tolerance distance</i> that corresponds approximately to the length of the largest
 features in a boundary that will be removed after simplification. That distance is measured in the map units of
 the vector map being simplified. So for example, UTM and National Grid coordinate systems would require the tolerance
 distance to be specified in metres. The figure below shows the effect of simplifying the British Isles coastline with
 a tolerance of 10km.
 <br /><br />
 <img src="images/figure3.7a.gif" width="624" height="387" align="bottom" alt="Birtish Isles coastline before and after simplifiction" />
 <span class="caption">British Isles coastline before and after simplification.</span>
</p>

<p>
 The process uses the Douglas-Peucker line simplification algorithm which is applied to any line or area boundaries. Lines
 or areas whose maximum length are within the tolerance distance are removed entirely. Point features in a vector map are
 preserved.
</p>

<h3>3.6.2 Polygon Centroids</h3>

<p>
 It is sometimes useful to identify the centroids of polygons in a vector map, for example when creating polygon labels or
 calculating density and proximity measures. To create a new vector map containing the centroids of all polyons in a given
 vector map, select <code>Transform-&gt;Polygons to centroids</code>. If necessary, the new centroid vector map can be 
 combined with the original vector map to create single layer (see 'Combining Data' above).
</p>
<h3>3.6.3 Joining Linear Data</h3>

<p>
 Linear data produced by a GPS track can often be fragmented into smaller line objects separated by periods where the device
 received no signal. Selecting <code>Edit-&gt;Join vector lines</code> will create a new vector map that joins up such fragmented
 line elements. The result will be a single line object with no 'gaps'. This can be useful for querying the total length of a GPS
 track or vector line (see <a href="./query.html">Chapter 6</a>).
</p>

<h2>3.7 Transforming Data</h2>

<p>
 LandSerf allows you to perform three types of transformation. <i>Coordinate transformations</i>
 change the locational representation of rasters and vectors and include map projection and 
 rectification. <i>Model transformations</i> include the conversion of vector to raster models,
 and the generation of contours and TINs (Triangulated Irregular Networks) from raster surfaces.
 <i>Raster value transformations</i> allow the values of individual raster cells to be changed
 through scaling, reclassification, translation etc. All are accessible through the <code>Transform</code>
 menu.
</p>

<h3>3.7.1 Coordinate Transformations</h3>

<h4>Map Projections</h4>
<p>
 Both rasters and vectors may be reprojected from and to global latitude/longitude to and from the following projection types:
<ul>
 <li>Universal Transverse Mercator (UTM)</li>
 <li>Ordnance Survey National Grid (OSGB)</li>
 <li>French NTF National Grid</li>
 <li>Swiss National Grid</li>
 <li>British Columbia Albers</li>
</ul> 
 
 All reprojections are selected from the <code>Transform-&gt;Reproject</code> menu item. Note that in order to reproject a
 raster or vector map, it must first have some defined map projection information. If necessary this can be identified by editing
 the spatial object (see Section 3.5 above).
 <br /><br />
 <img src="images/figure3.8.gif" width="600" height="296" align="bottom" alt="Lat/long and OSGB coordinate projections" />
 <span class="caption">Lat/long (left) and OSGB (right) coordinate projections</span>
</p>

<p>
 When rasters are reprojected you are given the option of setting the new resolution and bounds of the
 projected raster. This allows allows square pixels to be created by setting identical x and y resolutions. You are also given 
 the option to control whether or not to <i>interpolate</i> new values. Interpolation is suitable for continuous measurement data 
 such as elevation. For categorical data, make sure this option is not selected so that new raster values are 
 <i>resampled</i> from the original raster.
</p>

<h4>Image Rectification</h4>
<p>
 Many raster objects that need to be referenced to some spatial units can be georeferenced simply by
 editing the bounds of the four edges (see Section 3.5 above). However for some data, more sophisticated
 transformations are required. Rectification allows a number of 'before' and 'after' points (known as
 <i>transformation control points</i>) to be defined. LandSerf will then attempt to find an appropriate transformation
 that will convert the georeferenced locations of the 'before' points into appropriate 'after' locations.
 This transformation can then be applied to the entire raster.
</p>

<p>
 To perform image rectification, display the raster that will be transformed in the main LandSerf window
 and then select the <code>Transform-&gt;Rectify...</code> menu option. A new window similar to that
 shown below will appear. Making sure the <code>Add points</code> option is selected, click on the main 
 raster display at a point at which you know the true georeferenced location. The untransformed raster
 coordinates will appear in the rectification window in columns 2 and 3. Enter the georeferenced coordinates
 in columns 4 and 5. Repeat this process for other points on the raster. You should aim to create a spread
 of typically 10-20 points over the entire raster. To make this process easier, you may also use <i>zoom mode</i>
 to zoom into particular parts of the raster (making sure the <code>Add points</code> is <i>not</i> selected
 when using the mouse to zoom and pan). 
 <br /><br />
 <img src="images/figure3.9.gif" width="492" height="421" align="bottom" alt="Rectification control point editor" />
 <span class="caption">Rectification control point editor</span>
</p>

<p>
 You can control the complexity of the transformation to be applied by selecting one of the <code>linear</code>,
 <code>quadratic</code> or <code>cubic</code> transformation options. To calculate the transformation, 
 press the <code>Calculate transformation</code> button. This will display the coefficients of the transform
 along with a measure of <i>Root Mean Squared Error </i> (RMSE) which should be as small as possible. The error
 associated each point is also displayed, and this can give a clue as to which of the control points should
 be changed in order to reduce the error. It is often worth trying different linear/quadratic/cubic options
 and examining their effect on the overall RMSE. The figure below shows the degree of flexibility each of
 these has on the transformation process. Higher order transformations require progressively more points in
 order to model the transformation (linear - 3, quadratic - 6 and cubic - 10).
 <br /><br />
 <img src="images/figure3.10.gif" width="622" height="203" align="bottom" alt="Linear, quadratic and cubic rectification" />
 <span class="caption">Linear (left), quadratic (middle) and cubic (right) rectification</span>
</p>

<p>
 When you are happy with an appropriate set of control points and transformation type, these can be saved
 as a separate file for later use using the <code>Save points</code> button. To transform the raster itself,
 press the <code>Rectify map</code> button. You will then be presented with the option of changing the
 new bounds and resolution of the new raster before applying the rectification.
</p>

<h3>3.7.2 Model Transformations</h3>

<p>
 A raster DEM can be converted into a vector Triangulated Irregular Network (TIN) by selecting 
 the <code>Transform-&gt;DEM to TIN...</code> menu item. You will then be presented with a dialogue window 
 asking for various triangulation options (see figure below). To control the number of triangles produced
 by the process, either specify the number explicitly and select the relevant check box, or specify some
 error criterion. The error (either average as specified by the Root Mean Squared Error, or the maximum
 error) represents the difference in elevation between any point on the original DEM and its elevation in
 the TIN. The smaller the error	specified, the greater the number of triangles required in the network.
 A representation of the spatial pattern of errors can be produced by selecting 
 <code>Create Error Surface</code> from the dialogue box.
</p>
<br /><br />
 <img src="images/figure3.11.gif" width="287" height="190" align="bottom" alt="TIN creation options" />
 <span class="caption">TIN creation options</span>
</p>

<p>
 In common with other LandSerf processing options, the DEM to TIN transformation can be interrupted
 at any stage by clicking on the progress bar in the bottom-right corner. Once interrupted, LandSerf
 will create a new TIN based on the number of triangles created at the point of interruption.
</p>

<p>
 The triangulation process works by successively adding triangles to the network until either any of
 the selected error criteria are met, or the maximum number of triangles is reached (if specified).
 Alternatively, any set of point values can be triangulated by selecting <code>Points to TIN</code>
 from the <code>Transform</code> menu. This allow TINs to be created from points sets such as surface
 features (pits, passes and peaks) or spot heights.
</p>

<p>
 It is also possible to convert a given TIN back into a DEM. This is achieved by selecting the
 <code>Transform-&gt;TIN to DEM...</code> menu option. LandSerf will apply a planar interpolation of 
 the triangle network that tends to produce a surface composed of flat facets. If necessary, these
 can be smoothed using <i>Quadratic Interpolation</i> (see the <a href="analysis.html">Analysis</a>
 chapter for details).
 <br /><br />
 <img src="images/figure3.12.jpg" width="505" height="496" align="bottom" alt="TIN over 'TIN to DEM' surface" />
 <span class="caption">TIN over 'TIN to DEM' surface</span>
</p>

<p>
 It is possible to create a contour representation of a given DEM by selecting the 
 <code>Transform-&gt;DEM to contours...</code> menu option. Once selected, you can control the contour 
 interval and the elevation of the lowest contour. For DEMs with large flat areas (e.g. sea around an 
 island), more useful results are produced when a contours do not coincide with the elevation of the 
 extended flat region. Alternatively, flat areas can be reclassified as <i>null</i> values and be excluded
 from the transformation. The <code>Grid width</code> option controls the resolution at which DEM cells
 are sampled in order to thread contour lines. A value of 1 will sample every DEM cell and produce the 
 most detailed contour lines; larger values will be faster and will generalise the resulting contours.
<br /><br />
 <img src="images/figure3.13.gif" width="203" height="190" align="bottom" alt="Contour creation options" />
 <span class="caption">Contour creation options</span>
</p>

<p>
 By default, generated contour vectors are given the same colour scheme as the DEM from which they were
 derived. This can make them difficult to see when overlaid on the same DEM, so it can useful to change
 the colour scheme of one of the two models (e.g. grey contours shown in the figure below).
<br /><br />
 <img src="images/figure3.14.jpg" width="505" height="496" align="bottom" alt="DEM with countour overlay" />
 <span class="caption">DEM with contour overlay</span>
</p>

<p>
 More general vector to raster transformations can be made by selecting the
 <code>Transform-&gt;Vector to raster...</code> menu option. This will attempt to rasterize the currently
 selected vector map to a given resolution specified. Point data can be rasterized in this way, or they
 can be converted rasters of point density by selecting <code>Transform-&gt;Point to density surface...</code>.
 On selecting this menu option, a new dialogue window is shown requesting the raster resolution required
 and the size of the local window used to calculate density values. This can range from 1 to the size of
 the raster, but should be an odd number. The larger the number, the smoother and more generalised
 the resulting density surface will be. The transformation uses Cressman interpolation to create the surface
 where each cell in the new raster is the average density of neighbouring vector points weighted according to
 <br /><br />
 <span class="indent">w<sub>ij=</sub> = (s - d<sub>ij</sub>) / (s + d<sub>ij</sub>) </span>
 <br /><br />
 where s is the selected window size and d<sub>ij</sub> is the distance from the centre of the raster cell to
 each neighbouring point within the window.
</p>

<h3>3.7.3 Transforming Raster Values</h3>

<p>
 A series of simple transformations can be applied to the values of a raster's cells by selecting 
 the <code>Transform-&gt;Raster Values...</code> menu item. Raster values are scaled by the
 value in the <code>Scale</code> field, translated 'up' or 'down' by the <code>Translate</code>	value
 or rounded to the nearest <code>Round</code> value. The elevation model can also be 'flooded' such that
 all values below that in the <code>Flood</code> field will be assigned that value. Transformations 
 are only applied if the relevant check box is selected.
<br /><br />
 <img src="images/figure3.15.gif" width="292" height="214" align="bottom" alt="Raster value transformation" />
 <span class="caption">Raster value transformation replacing zeros with null values</span>
</p>

<p>
 Additionally, you can replace given raster values by entering appropriate figures in the 
 <code>Replace ... with</code> fields. If the two numeric values here are different, then all occurences
 of the number in the first field will be replaced with that in the second. This can be useful for simple
 reclassifications of categorical information. Rasters can also contain <i>null</i> values that are not
 displayed and are removed from processing operations. This is particularly useful for representing missing
 data, for water bodies and for excluding raster edges from processing. To replace numeric values with a 
 null, or a null value with a numeric equivalent, enter an <code>n</code> in the relevant field (see figure
 above).
</p>


 <!-- Footer area -->
 <div id="footer">
  <div id="lastModified">Last Modified, 20th April, 2009</div>
 </div>

</div> <!-- End of container area -->
</body>
</html>