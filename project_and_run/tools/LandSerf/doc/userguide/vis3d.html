<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html lang="en" xmlns="http://www.w3.org/1999/xhtml"><head> <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" /> <link rel="Stylesheet" rev="Stylesheet" href="../css/landserf.css" media="All" /><!-- LandSerf Header --> <title>LandSerf User's Guide - 5. Viewing and Navigating in Three Dimensions</title> <meta name="description" content="LandSerf User's Guide" /> <meta name="keywords" content="LandSerf GIS DEM Terrain modelling" /></head><body><div id="header"> <a href="../index.html">  <img src="../images/landserfText.gif" width="304" height="57" alt="Go to LandSerf documentation" />  <span id="lsicon">   <img src="../images/iconTitle.gif" width="57" height="57" alt="Go to Landserf documentation" />  </span> </a> <br /> <div id="breadcrumbs">  <span id="currentLocation">Chapter 5</span>          |  <a href="./index.html">User's Guide</a>              |  <a href="../../index.html">LandSerf 2.3 Documentation</a>  |  <a href="http://www.landserf.org">landserf.org</a> </div></div><div id="container"> <!-- End of header --><h1>Chapter 5. Viewing and Navigating in Three Dimensions</h1><p> Machines with graphics cards capable of accelerating 3D graphics through OpenGL can take advantage of LandSerf's 3D viewing options. Non-accelerated graphics rendering is still  possible, but in many cases will be too slow to allow much interactive visualisation.</p><p> To start the 3D viewer, a DEM must be selected as the primary raster. Optionally, a separate drape and vector map can be incorporated into the display if present. Selecting either the <code>Display-&gt;3D view</code> menu option or the  <img src="../images/3d16.gif" width="16" height="16" alt="button" /> button will start the 3d viewer. After a few seconds this should display a window similar to the one below showing the primary raster draped with whatever was shown in the main LandSerf window.  <br /><br /> <img src="images/figure5.1.jpg" width="620" height="553" align="bottom" alt="Initial 3D view" /> <span class="caption">Initial 3D view</span></p><p> Note that on some systems, especially Linux distributions, starting the 3d viewer can cause an error that quits LandSerf. This is usually due to some incompatibilities between the OpenGL drivers on that platform and the low-level graphics code in LandSerf. The most likely remedy is to ensure that you have up-to-date OpenGL drivers on your system.</p><h2>5.1 Navigating in 3 Dimensions</h2><p> To change the viewing position, use the mouse to control the location of the 'camera'. Navigation in  three dimensions takes a little while to get used to, but the general rule for moving the camera is to think of the camera as being set in the nose of an aeroplane pointing at the centre of the viewing window. </p><p> Holding the left mouse button down while dragging the mouse up and down controls the pitch of the  aeroplane. Dragging the mouse left or right controls the horizontal tilt ('yaw') and roll of the aeroplane. </p><p> To move towards or away from the viewpoint at the centre of the screen, either drag the mouse with the right button up or down, or hold the a shift key down while dragging the left mouse button. Dragging the mouse left or right in this way will move the camera left or right relative to your current view. If you have a mouse wheel between the two buttons, it can be used to raise or lower the elevation of the camera position. If you get lost at any stage, you can reset your position and viewing direction by pressing the <code>Reset camera view</code> button towards the bottom of the control panel.</p><p> When you have got used to these controls, the plane can be made to 'fly' or 'drive' by selecting the  appropriate option from the <code>Movement</code> menu. Driving will keep the camera at ground level while flying will allow the camera to move anywhere above the surface. The speed of the movement can be  controlled either with the mouse or the <code>Speed</code>	slider control to the right of the view. To  stop the camera from moving select wither <code>Hover</code> or <code>Walk</code> from the <code>Movement</code> menu.</p><p> Normally, the camera is kept above the surface during movement. The minimum height at which the camera  can be placed over the surface can be controlled using the <code>Movement-&gt;Control Movement</code> menu item. This option also allows the amount of rolling associated with an azimuthal change in direction to be controlled. Setting a larger rolling component can be used to simulate an aeroplane banking movement,  while a value of 0 simulates a 'helicopter turn' without rolling. The maximum animation speed can be  set from the <code>Control Movement</code> option, which can be useful for creating synchronised screen grabbing animation files.</p><p> As you navigate over a surface, it is possible to record the route you take. This can be stored and later replayed. To store a route, navigate to an appropriate starting point and press the <code>Store</code> button towards the bottom of the control panel. If you navigate to a second position over the surface  and press the button again, LandSerf will store the route between the two points. Further points can be added to build up a complete route over the surface.</p><p>  To 'play back' the route you have created, press the <code>Replay</code> button. The camera will be moved from the first through each of the subsequent stored points to the last recorded location. If the  <code>loop</code> tick box is set, the route will replay indefinitely. This is particularly appropriate for circular routes where the first and last points in the route are at similar locations. The	speed of  the replay can be controlled by <code>Speed</code> slider on the control panel. The playback can be  stopped at any time by pressing the <code>Stop</code> button and the route	can be cleared from memory by pressing the <code>Clear route</code> button.</p><p> Routes can be saved and loaded to /from disk by selecting the appropriate 'route' item from the  <code>File</code> menu. A saved route will not only store the camera trajectory, but also the other viewing parameters such as field of view, fog setting, resolution and background colours (see below for details of these options). If you do not wish to define or load your own route, a default circular 'tour' around the currently displayed surface can be created by pressing the <code>Tour</code> button in the control panel.</p><h2>5.2 Controlling Surface, Vector and Drape Detail</h2><p> The resolution of the underlying triangular mesh can be controlled using the <code>resolution</code> slider to the right of the view. Generally this should be set to quite a coarse value (e.g. 16 or above) while you are positioning the view, as a fine resolution slows down the rendering  considerably. If you have created a TIN in the main LandSerf window, this can be used to represent the surface in the 3d view by selecting <code>View-&gt;Use TIN</code>. <br /><br /> <img src="images/figure5.2.jpg" width="600" height="253" align="bottom" alt="Mesh and TIN representation of surface shape" /> <span class="caption">Mesh (left) and TIN (right) representation of surface shape</span></p><p> If a primary vector map is selected in the main LandSerf window, this will be available for display in the 3d view. Simply select <code>View-&gt;Show Vector</code> to toggle its display on or off. The appearance of the vectors can be controlled through the <code>View-&gt;Vector appearance</code> item. This allows the width, height and quality of the vector lines and points to be altered. Sometimes it is possible that parts of a vector object are obscured by the underlying surface. To avoid this, the <code>Vector appearance</code> box allows you to control the <code>clipping depth</code> effectively allowing even parts of the vector that are 'under' the surface to be displayed. You should experiment with the two clipping sliders to produce the best quality display. <br /><br /> <img src="images/figure5.3.jpg" width="690" height="553" align="bottom" alt="Vector route draped over DEM in 3D view" /> <span class="caption">Vector route draped over DEM in 3D view</span></p> <p> If you wish to change the vector map displayed in the 3d view, select the appropriate vector in the main  LandSerf window and then select <code>View-&gt;Refresh Vector</code> in the 3d view.</p><p> The raster to be draped over the surface is, by default, the image that was last displayed in  the main LandSerf window. Alternatively a graphics file (GIF, PNG or JPEG) can be loaded from the <code>File</code> menu. The quality of the drape, from whatever source, is	controlled from the <code>Drape-&gt;Quality</code> menu. The drape quality would not normally be set beyond the 'very high' level, which creates a textured surface of 1024x1024 pixels. Graphics cards with larger memories (typically 128 megabytes or greater) can also show the maximum texture size of 2048x2048 pixels. <br /><br /> <img src="images/figure5.4.jpg" width="700" height="544" align="bottom" alt="High quality drape over DEM in 3D view" /> <span class="caption">High quality drape over DEM in 3D view</span></p><p>  The image draped over the surface can be updated at any time by selecting the <code>Drape-&gt;Refresh</code> menu item. Whatever is displayed in the main LandSerf window will be  transferred to the 3d view. For more sophisticated control over the drape, selecting  <code>Drape-&gt;Distance drapes...</code> allows several independent images to be draped simultaneously. If your graphics card supports <I>mipmapping</i>, a different drape is displayed according	to the  distance between the 'camera' and surface. Larger resolutions correspond to closer views, smaller resolutions to more distant views. This technique ('<i>geomipmapping</i>') can be used to view multi-scale behaviour in a  dynamic 3d environment.</p><p> One further surface texture may be added to the 3d view. Local detail is displayed when the camera is close to a portion of the surface model. By adding sub-cell detail here, the 'pixelising' effect of viewing DEM cells at close range can be reduced. To change the properties of the local detail, select the <code>Drape-&gt;Detail...</code> menu option, which should bring up a window similar to the one shown below. <br /><br /> <img src="images/figure5.5.gif" width="536" height="242" align="bottom" alt="Local detail editor" /> <span class="caption">Local detail editor</span></p><p> From this window, a number of preset textures including <i>ripples</i>, <i>stones</i>, <i>marble</i> and <i>grids</i> can be selected. Their size and transparency can be controlled using the sliders. Alternatively, your own local texture image can be loaded and displayed by pressing the <code>Load</code> button. When viewed from a distance, tiled local textures can dominate the surface view, so by default the local texture fades with distance. This effect can be turned on and off using the <code>Fade</code> option. <br /><br /> <img src="images/figure5.6.jpg" width="536" height="430" align="bottom" alt="Surface with local 'stone' detail fading with distance" /> <span class="caption">Surface with local 'stone' detail fading with distance</span></p><h3>5.3 Environmental Settings</h3><p> A number of viewing options control the appearance of the environment in which the surface is viewed. The camera <code>Field of view</code> slider on the main control panel can be used to set the degree of zooming of the camera lens.  Wider fields of view taken with the camera close to the surface tend to  imply 'immersion' in a large terrain, while narrow fields of view ('zoom lens') suggest a smaller physical model of a surface viewed in greater detail.</p><p> Fog can be controlled with the <code>Fog</code> slider, which influences the degree to which the view becomes hazy with distance. Higher fog settings tend to reinforce immersion within the viewed scene.</p><p> The colours of the 'sea' surrounding the surface, the sky and the fog can all be altered interactively by selecting the appropriate item from the <code>View-&gt;Colours</code> menu. For added realism, it can be effective to set the sea colour to one similar to the dominant colour of the surface. This tends to blur the boundaries at the edge of the surface model, and especially effective for island models (see figure below).<br /><br /> <img src="images/figure5.7.jpg" width="486" height="300" align="bottom" alt="Aerial photograph over DEM in 3D view" /> <span class="caption">Aerial photograph over DEM in 3D view</span></p><h3>5.4 Image Output</h3><p> Images from the 3d viewer can either by directly printed or they can be captured as image files for further manipulation. To print a 3d view select <code>File-&gt;Print preview</code> to preview the printed image (see figure below), or <code>File-&gt;Print...</code> to send to the printer.<br /><br /> <img src="images/figure5.8.jpg" width="534" height="609" align="bottom" alt="Print preview of 3d View" /> <span class="caption">Print preview of 3d View</span></p><p> You may wish to capture output from the 3d viewer as an image or sequence of images. This is particularly useful if you wish to create a stand-alone animation file to distribute to others without LandSerf. To configure image output, select the <code>File-&gt;Image Output...</code> menu item. This should display a window similar to the one below.<br /><br /> <img src="images/figure5.9.gif" width="399" height="260" align="bottom" alt="Image capture options" /> <span class="caption">Image capture options</span></p><p> Clicking the <code>Snapshot</code> button will produce a single image identical to the current 3d display. Clicking the <code>Record</code> button will take a continuous sequence of images from the 3d viewer. This can be used to build up an animation sequence. Note that while recording in this way, rendering to screen is likely to be much slower than usual. Recording can be stopped at any point by pressing the <code>Pause</code> button.</p><p> The name and location of snapshot and animation files is determined by the <code>folder</code> and <code>base</code> options. The folder name can be entered directly or selected with the <code>browse</code> button. The 'base' name is that used to name the output file. It will be appended with the number of the file being written. The format of the image file can be selected using the drop-down menu. After changing the folder, base or format, make sure you press the <code>Set output</code> button  to confirm your changes. So, for example, if the folder was set to  <code>c:\anim</code>, the base to <code>image</code> and the format to <code>JPEG</code>, the first 3 files written would be <code>c:\anim\image0001.jpg</code>, <code>c:\anim\image0002.jpg</code>, <code>c:\anim\image0003.jpg</code>. The name of the last file written is displayed at the bottom of the image recorder window. To create a stand-alone animation file from a sequence of images, you will need to use third-party software such as <a href="http://www.virtualdub.org" target="_new">Virtual Dub</a> to assemble the individual images into a single animation file.</p><!-- Footer area --><div id="footer"> <div id="lastModified">Last Modified, 20th April, 2009</div></div></div> <!-- End of container area --></body></html>