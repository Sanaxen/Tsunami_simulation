<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
 <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
 <link rel="Stylesheet" rev="Stylesheet" href="../../css/landserf.css" media="All" />

<!-- LandSerf Header -->

 <title>LandScript - Example Scripts</title>
 <meta name="description" content="LandSerf scripting examples" />
 <meta name="keywords" content="LandSerf, GIS, DEM, Java, scripting, map algebra, LandScript, programming, Terrain modelling" />
</head>

<body>
<div id="header">
 <a href="../../../index.html">
  <img src="../../images/landserfText.gif" width="304" height="57" alt="Go to LandSerf documentation" />
  <span id="lsicon">
   <img src="../../images/iconTitle.gif" width="57" height="57" alt="Go to Landserf documentation" />
  </span>
 </a>
 <br />

 <div id="breadcrumbs">
  <span id="currentLocation">Example</span>       |
  <a href="./index.html">Examples index</a> |
  <a href="../index.html">LandScript</a> |
  <a href="../../index.html">LandSerf 2.3 Documentation</a> |
  <a href="http://www.landserf.org">landserf.org</a>
 </div>
</div>

<div id="container">

 <!-- End of header -->

<h1>Combining the contents of two objects</h1>

<h2>Adding two rasters</h2>

<!-- ~~~~ Created using jFormat V2.5 ~~~~ -->
<table cellpadding="0" cellspacing="0"><tr>
<td valign="top">
<pre class="numbering">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre>
</td>
<td valign="top">
<pre class="jSource">
<span class="jComment"># Adds the contents of two rasters together.</span>
<span class="jKeyword">version</span>(1.0);

<span class="jComment"># Change the directory below to correspond to your file location.</span>
baseDir = &quot;<span class="jQuote">c:/Program Files/LandSerf/data/landscriptExamples/</span>&quot;;

<span class="jComment"># Open elevation model and vegetation layer.</span>
dem = <span class="jKeyword">open</span>(baseDir&amp;&quot;<span class="jQuote">dem.srf</span>&quot;);
veg = <span class="jKeyword">open</span>(baseDir&amp;&quot;<span class="jQuote">vegetation.srf</span>&quot;);

<span class="jComment"># Create combined surface</span>
dsm = <span class="jKeyword">new</span>(dem);
dsm = dem + veg;

<span class="jComment"># Add metadata and save combined raster.</span>
<span class="jKeyword">edit</span>(dsm,&quot;<span class="jQuote">title</span>&quot;,&quot;<span class="jQuote">Digital Surface Model</span>&quot;);
<span class="jKeyword">edit</span>(dsm,&quot;<span class="jQuote">notes</span>&quot;,&quot;<span class="jQuote">Combined DEM ground surface and vegetation layer</span>&quot;);
<span class="jKeyword">save</span>(dsm,baseDir&amp;&quot;<span class="jQuote">dsm.srf</span>&quot;);
</pre>
</td></tr></table>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~ -->


<h2>Adding two vectors</h2>

<p>
 In this example, the vector maps that are added have their own attribute tables. The numeric attribute that is
 used when adding values together can be set by changing column of the active attribute (lines 16 and 17). If the 
 active attribute contains non-numeric values, the vector's ID is used instead. After addition, it no longer makes
 sense for the the new vector map (<code>output</code>) to retain its original attribute table, so it is removed
 (line 13).
</p>

<!-- ~~~~ Created using jFormat V2.5 ~~~~ -->
<table cellpadding="0" cellspacing="0"><tr>
<td valign="top">
<pre class="numbering">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre>
</td>
<td valign="top">
<pre class="jSource">
<span class="jComment"># Adds the contents of two vector maps with attribute tables.</span><i> </i>
<span class="jKeyword">version</span>(1.0);<i> </i>
<i> </i>
<span class="jComment"># Change the directory below to correspond to your file location.</span><i> </i>
baseDir = &quot;<span class="jQuote">c:/Program Files/LandSerf/data/landscriptExamples/</span>&quot;;<i> </i>
<i> </i>
<span class="jComment"># Open a point map and an area map</span><i> </i>
points = <span class="jKeyword">open</span>(baseDir&amp;&quot;<span class="jQuote">points.vec</span>&quot;);<i> </i>
areas  = <span class="jKeyword">open</span>(baseDir&amp;&quot;<span class="jQuote">shapes.vec</span>&quot;);<i> </i>
<i> </i>
<span class="jComment"># Use the point map to define the output vector</span><i> </i>
output = <span class="jKeyword">new</span>(points,&quot;<span class="jQuote">true</span>&quot;);<i> </i>
<span class="jKeyword">edit</span>(output,&quot;<span class="jQuote">attributes</span>&quot;,&quot;<span class="jQuote">noTable</span>&quot;);<i> </i>
<i> </i>
<span class="jComment"># Define the attribute table columns to act as input</span><i> </i>
<span class="jKeyword">edit</span>(areas,&quot;<span class="jQuote">attCol</span>&quot;,3);<i> </i>
<span class="jKeyword">edit</span>(points,&quot;<span class="jQuote">attCol</span>&quot;,2);<i> </i>
<i> </i>
<span class="jComment"># Add the active attributes of points and area maps</span><i> </i>
output = areas+points;<i> </i>
<i> </i>
<span class="jComment"># Set metadata and save the combined vector map.</span><i> </i>
<span class="jKeyword">colouredit</span>(output,&quot;<span class="jQuote">default</span>&quot;);<i> </i>
<span class="jKeyword">save</span>(output,baseDir&amp;&quot;<span class="jQuote">points2.vec</span>&quot;);<i> </i>
</pre>
</td></tr></table>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~ -->


<h2>Adding the contents of a raster to objects in a vector map</h2>

<p>
 The raster (a fractal surface in this example) is queried at the centroid of each vector object in the vector
 map. Each object then takes the value of that queried raster cell. If the vector object is outside the bounds
 of the raster, its value is set to <code>null</code> and is therefore not displayed.
</p>

<!-- ~~~~ Created using jFormat V2.5 ~~~~ -->
<table cellpadding="0" cellspacing="0"><tr>
<td valign="top">
<pre class="numbering">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre>
</td>
<td valign="top">
<pre class="jSource">
<span class="jComment"># Adds the contents of a raster map to objects in a vector map</span><i> </i>
<span class="jKeyword">version</span>(1.0);<i> </i>
<i> </i>
<span class="jComment"># Change the directory below to correspond to your file location.</span><i> </i>
baseDir = &quot;<span class="jQuote">c:/Program Files/LandSerf/data/landscriptExamples/</span>&quot;;<i> </i>
<i> </i>
<span class="jComment"># Create a fractal raster map</span><i> </i>
fracSurf = <span class="jKeyword">newraster</span>(400,400,1,1,800,800);<i> </i>
<span class="jKeyword">fractal</span>(fracSurf, 2.01);<i> </i>
<i> </i>
<span class="jComment"># Open a point map</span><i> </i>
points = <span class="jKeyword">open</span>(baseDir&amp;&quot;<span class="jQuote">points.vec</span>&quot;);<i> </i>
<i> </i>
<span class="jComment"># Set the value of each vector object to the raster cell at its location.</span><i> </i>
points = fracSurf;<i> </i>
<span class="jKeyword">edit</span>(points,&quot;<span class="jQuote">attributes</span>&quot;,&quot;<span class="jQuote">noTable</span>&quot;);<i> </i>
<i> </i>
<span class="jComment"># Set metadata and save the new vector map.</span><i> </i>
<span class="jKeyword">colouredit</span>(points,&quot;<span class="jQuote">default</span>&quot;);<i> </i>
<span class="jKeyword">save</span>(points,baseDir&amp;&quot;<span class="jQuote">points2.vec</span>&quot;);<i> </i>
</pre>
</td></tr></table>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

 <!-- Footer area -->
 <div id="footer">
  <div id="lastModified">Last Modified, 21st April, 2009</div>
 </div>

</div> <!-- End of container area -->
</body>
</html>