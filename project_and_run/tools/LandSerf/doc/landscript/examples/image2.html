<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
 <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
 <link rel="Stylesheet" rev="Stylesheet" href="../../css/landserf.css" media="All" />

<!-- LandSerf Header -->

 <title>LandScript - Example Scripts</title>
 <meta name="description" content="LandSerf scripting examples" />
 <meta name="keywords" content="LandSerf, GIS, DEM, Java, scripting, map algebra, LandScript, programming, Terrain modelling" />
</head>

<body>
<div id="header">
 <a href="../../../index.html">
  <img src="../../images/landserfText.gif" width="304" height="57" alt="Go to LandSerf documentation" />
  <span id="lsicon">
   <img src="../../images/iconTitle.gif" width="57" height="57" alt="Go to Landserf documentation" />
  </span>
 </a>
 <br />

 <div id="breadcrumbs">
  <span id="currentLocation">Example</span>       |
  <a href="./index.html">Examples index</a> |
  <a href="../index.html">LandScript</a> |
  <a href="../../index.html">LandSerf 2.3 Documentation</a> |
  <a href="http://www.landserf.org">landserf.org</a>
 </div>
</div>

<div id="container">

 <!-- End of header -->

<h1>Image Filtering</h1>

<p>
 The following examples assume the input raster contains numeric greyscale values. If a raw
 colour image is used, the filters below will need to be applied separately to the red, green
 and blue components before recombining in a composite image.
</p>

<h2>A 3x3 mean filter</h2>

<!-- ~~~~ Created using jFormat V2.5 ~~~~ -->
<table cellpadding="0" cellspacing="0"><tr>
<td valign="top">
<pre class="numbering">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre>
</td>
<td valign="top">
<pre class="jSource">
<span class="jComment"># Passes a 3x3 mean filter over a raster.</span>
<span class="jKeyword">version</span>(1.0);

<span class="jComment"># Change the directory below to correspond to your file location.</span>
baseDir = &quot;<span class="jQuote">/Users/jwo/landscript/examples/data/</span>&quot;;

<span class="jComment"># Open image file.</span>
image = <span class="jKeyword">open</span>(baseDir&amp;&quot;<span class="jQuote">greyImage.srf</span>&quot;);
filteredImage = <span class="jKeyword">new</span>(image);

<span class="jComment"># Do the filtering and save the raster.</span>
filteredImage = (image[-1,-1] + image[-1,0] + image[1,0] +
                 image[-1,0]  + image[0,0]  + image[1,0] + 
                 image[1,-1]  + image[1,0]  + image[1,1])/9;
<span class="jKeyword">save</span>(filteredImage,baseDir&amp;&quot;<span class="jQuote">filteredImage.srf</span>&quot;);
</pre>
</td></tr></table>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<h2>A 5x5 median filter</h2>

<!-- ~~~~ Created using jFormat V2.5 ~~~~ -->
<table cellpadding="0" cellspacing="0"><tr>
<td valign="top">
<pre class="numbering">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre>
</td>
<td valign="top">
<pre class="jSource">
<span class="jComment"># Passes a 5x5 median filter over a raster. Useful for removing noise from images.</span>
<span class="jKeyword">version</span>(1.0);

<span class="jComment"># Change the directory below to correspond to your file location.</span>
baseDir = &quot;<span class="jQuote">/Users/jwo/landscript/examples/data/</span>&quot;;

<span class="jComment"># Open image file.</span>
image = <span class="jKeyword">open</span>(baseDir&amp;&quot;<span class="jQuote">greyImage.srf</span>&quot;);
filteredImage = <span class="jKeyword">new</span>(image);

<span class="jComment"># Do the filtering and save the raster.</span>
filteredImage = <span class="jKeyword">median</span>(image[-2,-2],image[-2,-1],image[-2,0],image[-2,1],image[-2,2],
                       image[-1,-2],image[-1,-1],image[-1,0],image[-1,1],image[-1,2],
                       image[ 0,-2],image[ 0,-1],image[ 0,0],image[ 0,1],image[ 0,2],
                       image[ 1,-2],image[ 1,-1],image[ 1,0],image[ 1,1],image[ 1,2],
                       image[ 2,-2],image[ 2,-1],image[ 2,0],image[ 2,1],image[ 2,2]);
<span class="jKeyword">save</span>(filteredImage,baseDir&amp;&quot;<span class="jQuote">filteredImage.srf</span>&quot;);
</pre>
</td></tr></table>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<h2>A 3x3 edge detection filter</h2>

<!-- ~~~~ Created using jFormat V2.5 ~~~~ -->
<table cellpadding="0" cellspacing="0"><tr>
<td valign="top">
<pre class="numbering">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre>
</td>
<td valign="top">
<pre class="jSource">
<span class="jComment"># Passes a 3x3 edge detection filter over a raster.</span>
<span class="jKeyword">version</span>(1.0);

<span class="jComment"># Change the directory below to correspond to your file location.</span>
baseDir = &quot;<span class="jQuote">/Users/jwo/landscript/examples/data/</span>&quot;;

<span class="jComment"># Open image file.</span>
image = <span class="jKeyword">open</span>(baseDir&amp;&quot;<span class="jQuote">greyImage.srf</span>&quot;);
filteredImage = <span class="jKeyword">new</span>(image);

<span class="jComment"># Do the filtering and save the raster.</span>
filteredImage = <span class="jKeyword">abs</span>(-image[-1,-1] - image[-1,0] - image[1,0] 
                    -image[-1,0] +8*image[0,0]  - image[1,0]  
                    -image[1,-1]  - image[1,0]  - image[1,1]);

filteredImage = <span class="jKeyword">ifelse</span>(filteredImage &gt;255,255,filteredImage);

<span class="jKeyword">save</span>(filteredImage,baseDir&amp;&quot;<span class="jQuote">filteredImage.srf</span>&quot;);
</pre>
</td></tr></table>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

 <!-- Footer area -->
 <div id="footer">
  <div id="lastModified">Last Modified, 24th September, 2008</div>
 </div>

</div> <!-- End of container area -->
</body>
</html>