<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
 <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
 <link rel="Stylesheet" rev="Stylesheet" href="../../css/landserf.css" media="All" />

<!-- LandSerf Header -->

 <title>LandScript - Example Scripts</title>
 <meta name="description" content="LandSerf scripting examples" />
 <meta name="keywords" content="LandSerf, GIS, DEM, Java, scripting, map algebra, LandScript, programming, Terrain modelling" />
</head>

<body>
<div id="header">
 <a href="../../../index.html">
  <img src="../../images/landserfText.gif" width="304" height="57" alt="Go to LandSerf documentation" />
  <span id="lsicon">
   <img src="../../images/iconTitle.gif" width="57" height="57" alt="Go to Landserf documentation" />
  </span>
 </a>
 <br />

 <div id="breadcrumbs">
  <span id="currentLocation">Example</span>       |
  <a href="./index.html">Examples index</a> |
  <a href="../index.html">LandScript</a> |
  <a href="../../index.html">LandSerf 2.3 Documentation</a> |
  <a href="http://www.landserf.org">landserf.org</a>
 </div>
</div>

<div id="container">

 <!-- End of header -->

<h1>Measuring Characteristic Scales</h1>

<h2>Finding scales of most extreme parameter values</h2>

<p>
 This example measures the given parameter (e.g. slope, profile curvature etc.) over a range of scales, 
 and finds the scale at which that parameter is most extreme (either positive or negative). Output consists of
 two rasters, one containing the measured parameter, the other the window size at which the parameter is most
 extreme. Can be used to explore scale sensitivity of a surface.
</p>

<table border="0" cellspacing="0" cellpadding="0"><tr><td valign="top">

<!-- ~~~~ Created using jFormat V2.5 ~~~~ -->
<table cellpadding="0" cellspacing="0"><tr>
<td valign="top">
<pre class="numbering">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre>
</td>
<td valign="top">
<pre class="jSource">
<span class="jComment"># Script to measure surface parameter at characteristic scales.</span>
<span class="jKeyword">version</span>(1.0); 
 
<span class="jComment"># Change the directory below to correspond to your file location.</span>
baseDir = &quot;<span class="jQuote">c:/Program Files/LandSerf/data/landscriptExamples/</span>&quot;;

<span class="jComment"># Change the three values below to define the parameter to explore and the</span>
<span class="jComment"># scale range over which that parameter is to be measured.</span>
param = &quot;<span class="jQuote">planc</span>&quot;; 
maxWinSize = 35; 
minWinSize = 3; 

<span class="jComment"># Open the dem to analyse and create the rasters to store parameter and scale.</span>
dem = open(baseDir &amp; &quot;<span class="jQuote">dem.srf</span>&quot;); 
scaleMax = <span class="jKeyword">new</span>(dem); 
scaleMax = minWinSize; 
maxParamSurf = <span class="jKeyword">surfparam</span>(dem,param,minWinSize,1.0); 
winSize = minWinSize+2; 
maxParam = 0; 

<span class="jComment"># Loop through each window size comparing parameter with previous extreme values.</span>
<span class="jKeyword">while</span> (winSize &lt;= maxWinSize); 
{ 
    <span class="jKeyword">echo</span>(&quot;<span class="jQuote">Calculating </span>&quot;&amp;param&amp;&quot;<span class="jQuote"> using </span>&quot;&amp;winSize&amp;&quot;<span class="jQuote">x</span>&quot;&amp;winSize&amp;&quot;<span class="jQuote"> window.</span>&quot;);
    paramSurf = <span class="jKeyword">surfparam</span>(dem_, param, winSize, 1.0); 
    scaleMax = <span class="jKeyword">ifelse</span>(<span class="jKeyword">abs</span>(paramSurf) &gt; <span class="jKeyword">abs</span>(maxParamSurf), winSize, scaleMax); 
    maxParamSurf=<span class="jKeyword">ifelse</span>(<span class="jKeyword">abs</span>(paramSurf) &gt; <span class="jKeyword">abs</span>(maxParamSurf), paramSurf, maxParamSurf); 
    winSize = winSize + 2; 
} 

<span class="jComment"># Add metadata to the two new rasters. </span>
<span class="jKeyword">colouredit</span>(scaleMax,&quot;<span class="jQuote">rules</span>&quot;,minWinSize&amp;&quot;<span class="jQuote"> 255 255 255, </span>&quot;&amp; maxWinSize&amp;&quot;<span class="jQuote"> 0 0 0</span>&quot;); 
<span class="jKeyword">edit</span>(scaleMax,&quot;<span class="jQuote">title</span>&quot;,param&amp;&quot;<span class="jQuote"> characteristic scale</span>&quot;);
<span class="jKeyword">edit</span>(scaleMax,&quot;<span class="jQuote">notes</span>&quot;,&quot;<span class="jQuote">Window size at which </span>&quot;&amp;param&amp;&quot;<span class="jQuote"> values are most extreme.</span>&quot;);

<span class="jKeyword">edit</span>(maxParamSurf,&quot;<span class="jQuote">title</span>&quot;,&quot;<span class="jQuote">Extreme </span>&quot;&amp;param);
<span class="jKeyword">edit</span>(maxParamSurf,&quot;<span class="jQuote">notes</span>&quot;,param&amp;&quot;<span class="jQuote"> calculated with window sizes from </span>&quot;&amp;
                          minWinSize&amp;&quot;<span class="jQuote"> to </span>&quot;&amp;maxWinSize&amp;&quot;<span class="jQuote">. Contains the largest </span>&quot;&amp;
                          &quot;<span class="jQuote">absolute value of the parameter over the range of scales.</span>&quot;);

<span class="jComment"># Save the two new rasters </span>
<span class="jKeyword">save</span>(maxParamSurf,baseDir&amp;&quot;<span class="jQuote">max</span>&quot;&amp;param&amp;&quot;<span class="jQuote">.srf</span>&quot;); 
<span class="jKeyword">save</span>(scaleMax,baseDir&amp;&quot;<span class="jQuote">charScale</span>&quot;&amp;param&amp;&quot;<span class="jQuote">.srf</span>&quot;);
</pre>
</td></tr></table>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

</td><td valign="top">
<code>maxplanc.srf</code>:<br />
<img src="images/maxplanc.png" width="300" height="307" alt="maxplanc.srf" /><br /><br />
<code>charScaleplanc.srf</code>:<br />
<img src="images/charScaleplanc.png" width="300" height="307" alt="charScaleplanc.srf" /><br /><br />
</tr></table>

 <!-- Footer area -->
 <div id="footer">
  <div id="lastModified">Last Modified, 21st April, 2009</div>
 </div>

</div> <!-- End of container area -->
</body>
</html>