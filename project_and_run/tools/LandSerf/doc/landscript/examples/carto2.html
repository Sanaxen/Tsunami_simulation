<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
 <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
 <link rel="Stylesheet" rev="Stylesheet" href="../../css/landserf.css" media="All" />

<!-- LandSerf Header -->

 <title>LandScript - Example Scripts</title>
 <meta name="description" content="LandSerf scripting examples" />
 <meta name="keywords" content="LandSerf, GIS, DEM, Java, scripting, map algebra, LandScript, programming, Terrain modelling" />
</head>

<body>
<div id="header">
 <a href="../../../index.html">
  <img src="../../images/landserfText.gif" width="304" height="57" alt="Go to LandSerf documentation" />
  <span id="lsicon">
   <img src="../../images/iconTitle.gif" width="57" height="57" alt="Go to Landserf documentation" />
  </span>
 </a>
 <br />

 <div id="breadcrumbs">
  <span id="currentLocation">Example</span>       |
  <a href="./index.html">Examples index</a> |
  <a href="../index.html">LandScript</a> |
  <a href="../../index.html">LandSerf 2.3 Documentation</a> |
  <a href="http://www.landserf.org">landserf.org</a>
 </div>
</div>

<div id="container">

 <!-- End of header -->

<h1>Cartographic Shaded Relief</h1>

<h2>Banded hypsometric tinting</h2>

<p>
 This example colours elevation in 7 discrete colour bands with a fine contour line between each band.
</p>

<table border="0" cellspacing="0" cellpadding="0"><tr><td valign="top">

<!-- ~~~~ Created using jFormat V2.5 ~~~~ -->
<table cellpadding="0" cellspacing="0"><tr>
<td valign="top">
<pre class="numbering">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre>
</td>
<td valign="top">
<pre class="jSource">
<span class="jComment"># Draws a shaded relief map with banded hypsometric colours and contours</span>
<span class="jKeyword">version</span>(1.0);

<span class="jComment"># Change the directory below to correspond to your file location.</span>
baseDir = &quot;<span class="jQuote">c:/Program Files/LandSerf/data/landscriptExamples/</span>&quot;;

<span class="jComment"># Open raster DEM and create seven elevation bands.</span>
dem = open(baseDir&amp;&quot;<span class="jQuote">dem.srf</span>&quot;);
minHeight = <span class="jKeyword">info</span>(dem,&quot;<span class="jQuote">min</span>&quot;);
range = <span class="jKeyword">info</span>(dem,&quot;<span class="jQuote">max</span>&quot;)-minHeight;
inc = range/7;

<span class="jComment"># Provide a discrete colour for each band.</span>
<span class="jKeyword">colouredit</span>(dem,&quot;<span class="jQuote">rules</span>&quot;, minHeight &amp;       &quot;<span class="jQuote"> 141 166 141 (D),</span>&quot; &amp;
                        minHeight+ 1*inc &amp; &quot;<span class="jQuote"> 172 194 155 (D),</span>&quot; &amp;
                        minHeight+ 2*inc &amp; &quot;<span class="jQuote"> 221 219 167 (D),</span>&quot; &amp;        
                        minHeight+ 3*inc &amp; &quot;<span class="jQuote"> 254 235 181 (D),</span>&quot; &amp;
                        minHeight+ 4*inc &amp; &quot;<span class="jQuote"> 248 212 153 (D),</span>&quot; &amp;
                        minHeight+ 5*inc &amp; &quot;<span class="jQuote"> 241 170 109 (D),</span>&quot; &amp;
                        minHeight+ 6*inc &amp; &quot;<span class="jQuote"> 227 112  72 (D)</span>&quot;);

<span class="jComment"># Create contours at boundries of the bands.</span>
contours = <span class="jKeyword">contour</span>(dem,minHeight+(inc/2),inc,1);
<span class="jKeyword">colouredit</span>(contours,&quot;<span class="jQuote">rules</span>&quot;,&quot;<span class="jQuote">0 50 10 0</span>&quot;);
<span class="jKeyword">vectorstyle</span>(&quot;<span class="jQuote">linewidth</span>&quot;,0.1);

<span class="jComment"># Combine contours, relief and hypsometric tinting.</span>
<span class="jKeyword">draw</span>(baseDir&amp;&quot;<span class="jQuote">dem.png</span>&quot;,dem,dem,contours,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">relief</span>&quot;);
</pre>
</td></tr></table>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

</td><td valign="top">
<code>dem.png</code>:<br />
<img src="images/cartorelief1.png" width="300" height="299" alt="dem.png" /><br /><br />
</tr></table>


<h2>Cold and warm shaded relief</h2>

<p>
 This script uses phong shaded relief to create two relief maps of a DEM with a blue (cold) light slightly clockwise
 of NW and a yellow (warm) light slightly anticlockwise. The 'warm' relief is calculated at a coarse scale to emphasise
 the larger scale features in the DEM (lines 22-30). The two images are then blended and saved as file (line 33).
</p>

<p>
 Contours are threaded through the DEM at 100m vertical interval (line 37) and coloured a transparent brown (line38).
</p>

<p>
 Finally, the relief map is blended with the original coloured DEM with the contours overlaid to produce the final output.
</p>

<table border="0" cellspacing="0" cellpadding="0"><tr><td valign="top">

<!-- ~~~~ Created using jFormat V2.5 ~~~~ -->
<table cellpadding="0" cellspacing="0"><tr>
<td valign="top">
<pre class="numbering">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre>
</td>
<td valign="top">
<pre class="jSource">
<span class="jComment"># Draws cartographic shaded relief map of a DEM with contours.</span>
<span class="jKeyword">version</span>(1.0);

<span class="jComment"># Change the directory below to correspond to your file location.</span>
baseDir = &quot;<span class="jQuote">c:/Program Files/LandSerf/data/landscriptExamples/</span>&quot;;

<span class="jComment"># Open raster DEM.</span>
dem = <span class="jKeyword">open</span>(baseDir&amp;&quot;<span class="jQuote">dem.srf</span>&quot;);

<span class="jComment"># Set phong shading parameters</span>
<span class="jKeyword">edit</span>(dem,&quot;<span class="jQuote">specular</span>&quot;,70);
<span class="jKeyword">edit</span>(dem,&quot;<span class="jQuote">diffuse</span>&quot;,50);
<span class="jKeyword">edit</span>(dem,&quot;<span class="jQuote">ambient</span>&quot;,30);

<span class="jComment"># Sun shining between W and NW </span>
<span class="jComment"># with a 30 deg. divergence between warm and cold light directions.</span>
sunAzim = 292.5;
sunDeviation = 30;
coldSize = 3;
warmSize = 25;

<span class="jComment"># Cold light clockwise of main sun azimuth</span>
<span class="jKeyword">edit</span>(dem,&quot;<span class="jQuote">sunAzim</span>&quot;,(sunAzim+sunDeviation)%360);
relief1 = <span class="jKeyword">surfparam</span>(dem,&quot;<span class="jQuote">shade</span>&quot;,coldSize,1);
<span class="jKeyword">colouredit</span>(relief1,&quot;<span class="jQuote">rules</span>&quot;,&quot;<span class="jQuote">0 0 0 0, 1 127 127 255</span>&quot;);

<span class="jComment"># Warm light anticlockwise of main sun azimuth</span>
<span class="jKeyword">edit</span>(dem,&quot;<span class="jQuote">sunAzim</span>&quot;,(sunAzim-sunDeviation)%360);
relief2 = <span class="jKeyword">surfparam</span>(dem,&quot;<span class="jQuote">shade</span>&quot;,warmSize,1);
<span class="jKeyword">colouredit</span>(relief2,&quot;<span class="jQuote">rules</span>&quot;,&quot;<span class="jQuote">0 0 0 0, 1 255 255 127</span>&quot;);
 
<span class="jComment"># Blend the warm and cold images</span>
<span class="jKeyword">draw</span>(baseDir&amp;&quot;<span class="jQuote">relief.png</span>&quot;,relief1,relief2,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">blend</span>&quot;,50);

<span class="jComment"># Create contours from original DEM</span>
minHeight = <span class="jKeyword">round</span>(<span class="jKeyword">info</span>(dem,&quot;<span class="jQuote">min</span>&quot;)/10)*10;
contours = <span class="jKeyword">contour</span>(dem,minHeight,100,1);
<span class="jKeyword">colouredit</span>(contours,&quot;<span class="jQuote">rules</span>&quot;,&quot;<span class="jQuote">0 50 10 0 100</span>&quot;);
<span class="jKeyword">vectorstyle</span>(&quot;<span class="jQuote">linewidth</span>&quot;,0.1);

<span class="jComment"># Combine contours, relief and hypsometric tinting.</span>
relief = <span class="jKeyword">open</span>(baseDir&amp;&quot;<span class="jQuote">relief.png</span>&quot;,&quot;<span class="jQuote">image</span>&quot;);
<span class="jKeyword">draw</span>(baseDir&amp;&quot;<span class="jQuote">dem.png</span>&quot;,dem,relief,contours,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">blend</span>&quot;,30);
</pre>
</td></tr></table>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

</td><td valign="top">
<code>relief.png</code>:<br />
<img src="images/cartorelief2.png" width="300" height="274" alt="Relief" /><br /><br />
<code>dem.png</code>:<br />
<img src="images/cartorelief3.png" width="300" height="297" alt="Final output" /></td>
</tr></table>

 <!-- Footer area -->
 <div id="footer">
  <div id="lastModified">Last Modified, 21st April, 2009</div>
 </div>

</div> <!-- End of container area -->
</body>
</html>