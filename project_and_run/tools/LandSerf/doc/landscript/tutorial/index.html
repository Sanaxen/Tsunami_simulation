<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
 <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
 <link rel="Stylesheet" rev="Stylesheet" href="../../css/landserf.css" media="All" />

<!-- LandSerf Header -->

 <title>LandScript - Tutorial</title>
 <meta name="description" content="LandSerf scripting tutorial" />
 <meta name="keywords" content="LandSerf, GIS, DEM, Java, scripting, map algebra, LandScript, tutorial, programming, Terrain modelling" />
</head>

<body>
<div id="header">
 <a href="../../../index.html">
  <img src="../../images/landserfText.gif" width="304" height="57" alt="Go to LandSerf documentation" />
  <span id="lsicon">
   <img src="../../images/iconTitle.gif" width="57" height="57" alt="Go to Landserf documentation" />
  </span>
 </a>
 <br />

 <div id="breadcrumbs">
  <span id="currentLocation">LandScript Tutorial</span>       |
  <a href="../index.html">LandScript</a> |
  <a href="../../../index.html">LandSerf 2.3 Documentation</a> |
  <a href="http://www.landserf.org">landserf.org</a>
 </div>
</div>

<div id="container">

 <!-- End of header -->

<h1>LandScript - Tutorial</h1>

<p>
 This tutorial will show you how to use LandScript to perform tasks ranging from opening and saving files to 
 sophisticated spatial analysis using map algebra. It is highly recommended that you first familiarlise yourself
 with LandSerf before completing this tutorial, perhaps by completing the <a href="../../tutorial/index.html">introductory LandSerf tutorial</a>.
</p>

<p>
 For the moment, each tutorial step corresponds approximately to a stage in the LandSerf tutorial. The scripts are commented and should
 be self-explanatory.
</p>

<ol>
 <li><a href="#step1">Opening, reprojecting and saving a raster map</a></li>
 <li><a href="#step2">Editing raster metadata</a></li>
 <li><a href="#step3">Processing a landcover raster</a></li>
 <li><a href="#step4">Simple morphometric analysis</a></li>
 <li><a href="#step5">Advanced morphometric analysis</a></li>
</ol>

<!-- - - - - - - - - - Step 1 - - - - - - - - - -->
<a name="step1"></a>
<h2 class="blocktitle">Step 1 - Opening, reprojecting and saving a raster map.</h2>

<p>	
	Explanation to follow (see the <a href="../../tutorial/index.html">introductory LandSerf tutorial</a> for details).
</p>

<!-- ~~~~ Created using jFormat V2.4.1 ~~~~ -->
<table cellpadding="0" cellspacing="0"><tr>
<td valign="top">
<pre class="numbering">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre>
</td>
<td valign="top">
<pre class="jSource">
<span class="jComment"># Script to convert binary image file into a UTM LandSerf file.</span>
<span class="jComment"># v1.2 Jo Wood 21st April, 2009.</span>
<span class="jComment"># -------------------------------------------------------------</span>
<span class="jKeyword">version</span>(1.0);

<span class="jComment"># Store the base directory in a variable to allow easy changing.</span>
baseDir = &quot;<span class="jQuote">c:/Program Files/LandSerf/data/</span>&quot;;

<span class="jComment"># Open the .bil file and store the raster as a variable.</span>
dem = <span class="jKeyword">open</span>(baseDir &amp; &quot;<span class="jQuote">lincolnNED.bil</span>&quot;);

<span class="jComment"># Add the projection metadata to the DEM.</span>
<span class="jKeyword">edit</span>(dem,&quot;<span class="jQuote">projection</span>&quot;,&quot;<span class="jQuote">LatLong</span>&quot;);
<span class="jKeyword">edit</span>(dem,&quot;<span class="jQuote">ellipsoid</span>&quot;,&quot;<span class="jQuote">wgs 84</span>&quot;);

<span class="jComment"># Create a new Universal Transverse Mercator (UTM) reprojected DEM.</span>
dem = <span class="jKeyword">reproject</span>(dem_,&quot;<span class="jQuote">UTM</span>&quot;,&quot;<span class="jQuote">true</span>&quot;,30,30);

<span class="jComment"># Save the edited raster as a LandSerf file.</span>
<span class="jKeyword">save</span>(dem, baseDir &amp; &quot;<span class="jQuote">landscriptTutorial/step1.srf</span>&quot;);
</pre>
</td></tr></table>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<!-- - - - - - - - - - Step 2 - - - - - - - - - -->
<a name="step2"></a>
<h2 class="blocktitle">Step 2 - Editing raster metadata.</h2>

<p>	
	Explanation to follow (see the <a href="../../tutorial/index.html">introductory LandSerf tutorial</a> for details).
</p>

<!-- ~~~~ Created using jFormat V2.4.1 ~~~~ -->
<table cellpadding="0" cellspacing="0"><tr>
<td valign="top">
<pre class="numbering">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre>
</td>
<td valign="top">
<pre class="jSource">
<span class="jComment"># Script to edit the metadata of a spatial object.</span>
<span class="jComment"># v1.2 Jo Wood 21st April, 2009.</span>
<span class="jComment"># -------------------------------------------------------------</span>
<span class="jKeyword">version</span>(1.0);

<span class="jComment"># Store the base directory in a variable to allow easy changing.</span>
baseDir = &quot;<span class="jQuote">c:/Program Files/LandSerf/data/landscriptTutorial/</span>&quot;;

<span class="jComment"># Open the file from the previous step and store as a variable.</span>
dem = <span class="jKeyword">open</span>(baseDir &amp; &quot;<span class="jQuote">step1.srf</span>&quot;);

<span class="jComment"># Give the raster a new colour table.</span>
<span class="jKeyword">colouredit</span>(dem,&quot;<span class="jQuote">land3</span>&quot;);

<span class="jComment"># Guess at the water level by finding modal elevation</span>
maxFreq = <span class="jKeyword">info</span>(dem,&quot;<span class="jQuote">modef</span>&quot;);
<span class="jKeyword">if</span> (maxFreq &gt; 1000);
{
  <span class="jComment"># If there are more than 1000 cells of same height, colour them blue</span>
  waterLevel = <span class="jKeyword">info</span>(dem,&quot;<span class="jQuote">mode</span>&quot;);
  <span class="jKeyword">colouredit</span>(dem,&quot;<span class="jQuote">addRule</span>&quot;,waterLevel &amp; &quot;<span class="jQuote"> 141 141 166 (D)</span>&quot;);
}

<span class="jComment"># Update title and notes.</span>
<span class="jKeyword">edit</span>(dem,&quot;<span class="jQuote">title</span>&quot;,&quot;<span class="jQuote">Lincoln 30m DEM</span>&quot;);
<span class="jKeyword">edit</span>(dem,&quot;<span class="jQuote">notes</span>&quot;,&quot;<span class="jQuote">Elevation data from USGS National Elevation Dataset (NED) available from http://seamless.usgs.gov</span>&quot;);

<span class="jComment"># Save the edited raster as a LandSerf file.</span>
<span class="jKeyword">save</span>(dem, baseDir &amp; &quot;<span class="jQuote">step2.srf</span>&quot;);
</pre>
</td></tr></table>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~ -->


<!-- - - - - - - - - - Step 3 - - - - - - - - - -->
<a name="step3"></a>
<h2 class="blocktitle">Step 3 - Processing a landcover raster.</h2>

<p>	
	Explanation to follow (see the <a href="../../tutorial/index.html">introductory LandSerf tutorial</a> for details).
</p>

<!-- ~~~~ Created using jFormat V2.4.1 ~~~~ -->
<table cellpadding="0" cellspacing="0"><tr>
<td valign="top">
<pre class="numbering">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre>
</td>
<td valign="top">
<pre class="jSource">
<span class="jComment"># Script to process a landcover raster.</span>
<span class="jComment"># v1.2 Jo Wood 21st April, 2009.</span>
<span class="jComment"># -------------------------------------------------------------</span>
<span class="jKeyword">version</span>(1.0);

<span class="jComment"># Store the base directory in a variable to allow easy changing.</span>
baseDir = &quot;<span class="jQuote">c:/Program Files/LandSerf/data/</span>&quot;;

<span class="jComment"># Open the landcover file, reproject it to UTM.</span>
landcover = <span class="jKeyword">open</span>(baseDir &amp; &quot;<span class="jQuote">lincolnLandcover.bil</span>&quot;);
<span class="jKeyword">edit</span>(landcover,&quot;<span class="jQuote">projection</span>&quot;,&quot;<span class="jQuote">LatLong</span>&quot;);
<span class="jKeyword">edit</span>(landcover,&quot;<span class="jQuote">ellipsoid</span>&quot;,&quot;<span class="jQuote">wgs 84</span>&quot;);
landcover = <span class="jKeyword">reproject</span>(landcover_,&quot;<span class="jQuote">UTM</span>&quot;,&quot;<span class="jQuote">false</span>&quot;,30,30);

<span class="jComment"># Update the landcover metadata.</span>
<span class="jKeyword">edit</span>(landcover,&quot;<span class="jQuote">title</span>&quot;,&quot;<span class="jQuote">Lincoln landcover</span>&quot;);
<span class="jKeyword">colouredit</span>(landcover,&quot;<span class="jQuote">file</span>&quot;,baseDir &amp; &quot;<span class="jQuote">landcover.ctb</span>&quot;);
<span class="jKeyword">edit</span>(landcover,&quot;<span class="jQuote">attributes</span>&quot;,baseDir &amp; &quot;<span class="jQuote">landcover.atr</span>&quot;);
<span class="jKeyword">edit</span>(landcover,&quot;<span class="jQuote">attCol</span>&quot;,3);
<span class="jKeyword">edit</span>(landcover,&quot;<span class="jQuote">type</span>&quot;,&quot;<span class="jQuote">other</span>&quot;);

<span class="jComment"># Find average height of all forested areas.</span>
dem = <span class="jKeyword">open</span>(baseDir &amp; &quot;<span class="jQuote">step2.srf</span>&quot;);
forestHeight = <span class="jKeyword">new</span>(landcover);
forestHeight = <span class="jKeyword">ifelse</span>((landcover &gt;= 40) <span class="jKeyword">and</span> (landcover &lt;=49),dem,null());
<span class="jKeyword">echo</span>(&quot;<span class="jQuote">Average height of forest is </span>&quot; &amp; <span class="jKeyword">round</span>(<span class="jKeyword">info</span>(forestHeight,&quot;<span class="jQuote">mean</span>&quot;)) &amp; &quot;<span class="jQuote">m.</span>&quot;);

<span class="jComment"># Find average height of scrubland areas.</span>
dem = <span class="jKeyword">open</span>(baseDir &amp; &quot;<span class="jQuote">step2.srf</span>&quot;);
scrubHeight = <span class="jKeyword">new</span>(landcover);
scrubHeight = <span class="jKeyword">ifelse</span>(landcover == 51,dem,null());
<span class="jKeyword">echo</span>(&quot;<span class="jQuote">Average height of scrubland is </span>&quot; &amp; <span class="jKeyword">round</span>(<span class="jKeyword">info</span>(scrubHeight,&quot;<span class="jQuote">mean</span>&quot;)) &amp; &quot;<span class="jQuote">m.</span>&quot;);

<span class="jComment"># Save the edited landcover as a LandSerf file.</span>
<span class="jKeyword">save</span>(landcover, baseDir &amp; &quot;<span class="jQuote">landscriptTutorial/step3.srf</span>&quot;);
</pre>
</td></tr></table>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<!-- - - - - - - - - - Step 4 - - - - - - - - - -->
<a name="step4"></a>
<h2 class="blocktitle">Step 4 - Simple morphometric analysis.</h2>

<p>	
	Explanation to follow (see the <a href="../../tutorial/index.html">introductory LandSerf tutorial</a> for details).
</p>

<!-- ~~~~ Created using jFormat V2.5 ~~~~ -->
<table cellpadding="0" cellspacing="0"><tr>
<td valign="top">
<pre class="numbering">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
</pre>
</td>
<td valign="top">
<pre class="jSource">
<span class="jComment"># Script to perform some simple morphometric analysis on a DEM.</span>
<span class="jComment"># v1.2 Jo Wood 21st April, 2009.</span>
<span class="jComment"># -------------------------------------------------------------</span>
<span class="jKeyword">version</span>(1.0);

<span class="jComment"># Store the base directory in a variable to allow easy changing.</span>
baseDir = &quot;<span class="jQuote">c:/Program Files/LandSerf/data/landscriptTutorial/</span>&quot;;

<span class="jComment"># Open the DEM and landcover raster from the previous steps.</span>
dem = open(baseDir &amp; &quot;<span class="jQuote">step2.srf</span>&quot;);
landcover = open(baseDir &amp; &quot;<span class="jQuote">step3.srf</span>&quot;);

<span class="jComment"># Create a shaded relief image saved as a file.</span>
<span class="jKeyword">edit</span>(dem,&quot;<span class="jQuote">vExag</span>&quot;,3);
<span class="jKeyword">draw</span>(baseDir &amp; &quot;<span class="jQuote">relief.jpg</span>&quot;,dem,landcover,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">relief</span>&quot;);

<span class="jComment"># Output some relevant DEM metadata</span>
showMetadata(dem,&quot;<span class="jQuote">elevation</span>&quot;);

<span class="jComment"># Calculate and output slope of DEM</span>
slope = <span class="jKeyword">surfparam</span>(dem,&quot;<span class="jQuote">slope</span>&quot;);
<span class="jKeyword">draw</span>(baseDir &amp; &quot;<span class="jQuote">slope.jpg</span>&quot;,dem,slope,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">relief</span>&quot;);
showMetadata(slope,&quot;<span class="jQuote">slope</span>&quot;);

<span class="jComment"># Create images of the other surface parameters.</span>
<span class="jKeyword">draw</span>(baseDir &amp; &quot;<span class="jQuote">aspect.jpg</span>&quot;,dem,<span class="jKeyword">surfparam</span>(dem,&quot;<span class="jQuote">aspect</span>&quot;),&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">relief</span>&quot;);
<span class="jKeyword">draw</span>(baseDir &amp; &quot;<span class="jQuote">profc.jpg</span>&quot;, dem,<span class="jKeyword">surfparam</span>(dem,&quot;<span class="jQuote">profc</span>&quot;),&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">relief</span>&quot;);
<span class="jKeyword">draw</span>(baseDir &amp; &quot;<span class="jQuote">planc.jpg</span>&quot;, dem,<span class="jKeyword">surfparam</span>(dem,&quot;<span class="jQuote">planc</span>&quot;),&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">relief</span>&quot;);

<span class="jComment"># Finally create a surface feature map and save as a LandSerf file.</span>
features = <span class="jKeyword">surfparam</span>(dem,&quot;<span class="jQuote">feature</span>&quot;);
<span class="jKeyword">save</span>(features, baseDir &amp; &quot;<span class="jQuote">LincolnFeatures.srf</span>&quot;);


<span class="jComment"># Function to display some spatial metadata.</span>
<span class="jComment"># Params: raster Raster from which to extract metadata.</span>
<span class="jComment">#         name Name of raster.</span>
<span class="jKeyword">function</span> showMetadata(raster,name)
{
  <span class="jKeyword">echo</span>(&quot;<span class="jQuote">\n</span>&quot; &amp; name);
  <span class="jKeyword">echo</span>(&quot;<span class="jQuote">East-west extent: </span>&quot;&amp; (<span class="jKeyword">info</span>(raster,&quot;<span class="jQuote">E</span>&quot;)-<span class="jKeyword">info</span>(raster,&quot;<span class="jQuote">W</span>&quot;))/1000 &amp; &quot;<span class="jQuote">km.</span>&quot;);
  <span class="jKeyword">echo</span>(&quot;<span class="jQuote">North-south extent: </span>&quot;&amp; (<span class="jKeyword">info</span>(raster,&quot;<span class="jQuote">N</span>&quot;)-<span class="jKeyword">info</span>(raster,&quot;<span class="jQuote">S</span>&quot;))/1000 &amp; &quot;<span class="jQuote">km.</span>&quot;);
  <span class="jKeyword">echo</span>(name&amp;&quot;<span class="jQuote"> range from </span>&quot;&amp; <span class="jKeyword">info</span>(raster,&quot;<span class="jQuote">min</span>&quot;)&amp;&quot;<span class="jQuote"> to </span>&quot;&amp;<span class="jKeyword">info</span>(raster,&quot;<span class="jQuote">max</span>&quot;)&amp;&quot;<span class="jQuote">.</span>&quot;);
  <span class="jKeyword">echo</span>(&quot;<span class="jQuote">Mean </span>&quot;&amp;name&amp;&quot;<span class="jQuote">: </span>&quot;&amp; <span class="jKeyword">info</span>(raster,&quot;<span class="jQuote">mean</span>&quot;));
  <span class="jKeyword">echo</span>(&quot;<span class="jQuote">Modal </span>&quot;&amp;name&amp;&quot;<span class="jQuote"> value: </span>&quot;&amp; <span class="jKeyword">info</span>(raster,&quot;<span class="jQuote">mode</span>&quot;));
  <span class="jKeyword">echo</span>(&quot;<span class="jQuote">Standard deviation of </span>&quot;&amp;name&amp;&quot;<span class="jQuote">: </span>&quot;&amp; <span class="jKeyword">info</span>(raster,&quot;<span class="jQuote">stdev</span>&quot;));
  <span class="jKeyword">echo</span>(&quot;<span class="jQuote">Skewness of </span>&quot;&amp;name&amp;&quot;<span class="jQuote">: </span>&quot;&amp; <span class="jKeyword">info</span>(raster,&quot;<span class="jQuote">skew</span>&quot;) &amp; &quot;<span class="jQuote">\n</span>&quot;);
}
</pre>
</td></tr></table>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<!-- - - - - - - - - - Step 5 - - - - - - - - - -->
<a name="step5"></a>
<h2 class="blocktitle">Step 5 - Advanced morphometric analysis.</h2>

<p>	
	Explanation to follow (see the <a href="../../tutorial/index.html">introductory LandSerf tutorial</a> for details).
</p>

<!-- ~~~~ Created using jFormat V2.5 ~~~~ -->
<table cellpadding="0" cellspacing="0"><tr>
<td valign="top">
<pre class="numbering">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre>
</td>
<td valign="top">
<pre class="jSource">
<span class="jComment"># Script to perform more advanced morphometric analysis on a DEM.</span>
<span class="jComment"># v1.2 Jo Wood 21st April, 2009.</span>
<span class="jComment"># -------------------------------------------------------------</span>
<span class="jKeyword">version</span>(1.0);

<span class="jComment"># Store the base directory in a variable to allow easy changing.</span>
baseDir = &quot;<span class="jQuote">c:/Program Files/LandSerf/data/landscriptTutorial/</span>&quot;;

<span class="jComment"># Open the DEM from the earlier step.</span>
dem = open(baseDir &amp; &quot;<span class="jQuote">step2.srf</span>&quot;);

<span class="jComment"># Calculate 11x11 cell smothed elevation and draw output.</span>
winSize = 11*<span class="jKeyword">info</span>(dem,&quot;<span class="jQuote">xRes</span>&quot;);
<span class="jKeyword">echo</span>(&quot;<span class="jQuote">Smoothing elevation using </span>&quot;&amp;winSize&amp;&quot;<span class="jQuote">m x </span>&quot;&amp;winSize&amp;&quot;<span class="jQuote">m window</span>&quot;);
<span class="jKeyword">draw</span>(baseDir &amp; &quot;<span class="jQuote">elev11.jpg</span>&quot;, <span class="jKeyword">surfparam</span>(dem,&quot;<span class="jQuote">elev</span>&quot;,11),&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">relief</span>&quot;);

<span class="jComment"># Calculate 65x65 cell smothed elevation and draw and save output.</span>
winSize = 65*<span class="jKeyword">info</span>(dem,&quot;<span class="jQuote">xRes</span>&quot;)/1000;
<span class="jKeyword">echo</span>(&quot;<span class="jQuote">Smoothing elevation using </span>&quot;&amp;winSize&amp;&quot;<span class="jQuote">km x </span>&quot;&amp;winSize&amp;&quot;<span class="jQuote">km window</span>&quot;);
elev65 = <span class="jKeyword">surfparam</span>(dem,&quot;<span class="jQuote">elev</span>&quot;,65);
<span class="jKeyword">draw</span>(baseDir &amp; &quot;<span class="jQuote">elev65.jpg</span>&quot;,elev65,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">relief</span>&quot;);
<span class="jKeyword">save</span>(elev65,baseDir&amp;&quot;<span class="jQuote">elev65.srf</span>&quot;);

<span class="jComment"># Create a 5x5 feature network and metric surface network</span>
feat5 = <span class="jKeyword">surfparam</span>(dem,&quot;<span class="jQuote">netfeature</span>&quot;,5,1);
msn = <span class="jKeyword">surfnetwork</span>(dem,feat5);
<span class="jKeyword">draw</span>(baseDir &amp; &quot;<span class="jQuote">featnetwork.jpg</span>&quot;,dem,&quot;<span class="jQuote">null</span>&quot;,msn,&quot;<span class="jQuote">null</span>&quot;,&quot;<span class="jQuote">relief</span>&quot;);
<span class="jKeyword">save</span>(msn,baseDir&amp;&quot;<span class="jQuote">msn.vec</span>&quot;);
</pre>
</td></tr></table>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~ -->


 <!-- Footer area -->
 <div id="footer">
  <div id="lastModified">Last Modified, 21st April, 2009</div>
 </div>

</div> <!-- End of container area -->
</body>
</html>